(this["webpackJsonptoken-royale"]=this["webpackJsonptoken-royale"]||[]).push([[0],{190:function(e,t,n){},192:function(e,t,n){},226:function(e,t){},227:function(e,t){},419:function(e,t){},421:function(e,t){},454:function(e,t,n){"use strict";n.r(t);var r=n(15),a=n.n(r),s=n(184),c=n.n(s),u=(n(190),n(5)),o=n(52),i=n(2),p=n.n(i),f=(n(192),n(3)),l=function(e){var t=e.ast,n=e.balance;return Object(f.jsx)("div",{className:"asset",children:Object(f.jsx)("li",{className:"asset-item",children:t+"\t"+n})})},b=function(e){e.account;var t=e.assets;return Object(f.jsxs)("div",{children:[Object(f.jsx)("div",{className:"assets-title",children:Object(f.jsx)("h1",{children:"Assets"})}),Object(f.jsx)("div",{className:"assets-container",children:Object(f.jsx)("ul",{className:"assets-list",children:t.map((function(e){var t="";return t=void 0===e.asset?"XLM":e.asset,Object(f.jsx)(l,{ast:t,balance:e.balance})}))})})]})},x=n(185),d=n(51),h=n.n(d),v=n(10),j=n.n(v),O=n(32),w=n.n(O),k=n(33),m=n.n(k),T=function(){var e=Object(u.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!h.a.isConnected()){e.next=2;break}return e.abrupt("return",!0);case 2:return e.abrupt("return",!1);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(u.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",n="",e.prev=2,e.next=5,h.a.getPublicKey();case 5:t=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),n=e.t0;case 11:if(!n){e.next=14;break}return console.error(n),e.abrupt("return",!1);case 14:return e.abrupt("return",t);case 15:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(u.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",n="",e.prev=2,e.next=5,h.a.getNetwork();case 5:t=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),n=e.t0;case 11:if(!n){e.next=14;break}return console.error(n),e.abrupt("return",!1);case 14:if("TESTNET"===t){e.next=16;break}return e.abrupt("return",!1);case 16:return e.abrupt("return",!0);case 17:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=Object(u.a)(p.a.mark((function e(){var t,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:return t=e.sent,e.next=5,y();case 5:return n=e.sent,e.next=8,T();case 8:return r=e.sent,e.abrupt("return",t&&n&&r);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(u.a)(p.a.mark((function e(t,n){var r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="",a="",e.prev=2,e.next=5,h.a.signTransaction(t,n);case 5:r=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),a=e.t0;case 11:if(!a){e.next=13;break}return e.abrupt("return",a);case 13:return e.abrupt("return",r);case 14:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t,n){return e.apply(this,arguments)}}(),E=function(){var e=Object(u.a)(p.a.mark((function e(t,n,r){var a,s,c,u,o,i,f;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new j.a.Server("https://horizon-testnet.stellar.org"),s={destination:n,asset:j.a.Asset.native(),amount:t},e.next=4,a.fetchBaseFee();case 4:return e.t0=e.sent,c={fee:e.t0,networkPassphrase:"Test SDF Network ; September 2015"},e.next=8,a.loadAccount(r);case 8:return u=e.sent,o=new j.a.TransactionBuilder(u,c).addOperation(j.a.Operation.payment(s)).setTimeout(w.a.TimeoutInfinite).build(),i=o.toEnvelope().toXDR("base64"),e.next=13,S(i,"TESTNET");case 13:return f=e.sent,e.abrupt("return",f);case 15:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),B=function(){var e=Object(u.a)(p.a.mark((function e(t,n,r){var a,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={txFunctionFee:t},e.next=3,m.a.post(n+"tx-fees/"+r,a);case 3:return s=e.sent,e.abrupt("return",s.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),A=function(){var e=Object(u.a)(p.a.mark((function e(t,n){var r,a,s,c,u,o,i,f,l,b;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Generating XDR Token..."),e.prev=1,r=new j.a.Account(n,"-1"),a=new j.a.Server("https://horizon-testnet.stellar.org"),e.next=6,a.fetchBaseFee();case 6:s=e.sent,c=new j.a.TransactionBuilder(r,{fee:s,networkPassphrase:j.a.Networks.TESTNET}),u=Object(x.a)(t);try{for(u.s();!(o=u.n()).done;)i=o.value,c.addOperation(j.a.Operation.manageData({name:"txFunctionHash",value:i}))}catch(p){u.e(p)}finally{u.f()}return f=c.setTimeout(86400).build(),l=f.toEnvelope().toXDR("base64"),e.next=14,S(l,"TESTNET");case 14:return b=e.sent,e.abrupt("return",b);case 18:e.prev=18,e.t0=e.catch(1),alert(e.t0);case 21:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(t,n){return e.apply(this,arguments)}}(),F=function(){var e=Object(u.a)(p.a.mark((function e(t,n,r,a){var s,c,u;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Running function..."),s={source:t},c={Authorization:"Bearer "+n},e.next=5,m.a.post(r+"tx-functions/"+a,s,{headers:c});case 5:return u=e.sent,e.abrupt("return",u.data);case 7:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),D=function(){var e=Object(u.a)(p.a.mark((function e(t,n,r){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Adding turret signature to transaction..."),(a=new j.a.Transaction(t,j.a.Networks.TESTNET)).addSignature(n,r),e.abrupt("return",a.toXDR());case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),X=function(){var e=Object(u.a)(p.a.mark((function e(t){var n,r,a,s,c,u,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Sending transaction..."),n="https://horizon-testnet.stellar.org",r=new j.a.Server(n),a=new j.a.Transaction(t,j.a.Networks.TESTNET),s=a.toEnvelope().toXDR("base64"),e.next=7,S(s,"TESTNET");case 7:return c=e.sent,u=j.a.TransactionBuilder.fromXDR(c,n),e.next=11,r.submitTransaction(u);case 11:return o=e.sent,e.abrupt("return",o);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(u.a)(p.a.mark((function e(t){var n,r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new j.a.Server("https://horizon-testnet.stellar.org"),e.next=3,n.loadAccount(t);case 3:return r=e.sent,a=r.balances.map((function(e){return{asset:e.asset_code,type:e.asset_type,balance:e.balance}})),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(u.a)(p.a.mark((function e(t,n){var r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={Authorization:"Bearer "+t},e.next=3,m.a.get(n+"tx-fees/",{headers:r});case 3:return a=e.sent,e.abrupt("return",a.data.balance);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),C=function(e){var t=e.account,n=e.setAssets,r=e.turretPublicKey,a=e.funcBaseUrl,s=e.funcAddresses,c=e.xdrToken,o=e.setFuncBalance,i=function(){var e=Object(u.a)(p.a.mark((function e(){var s,u,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N();case 2:if(!e.sent){e.next=19;break}return e.next=6,E("10",r,t);case 6:return s=e.sent,e.next=9,B(s,a,t);case 9:return e.next=11,R(t);case 11:return u=e.sent,e.next=14,P(c,a);case 14:i=e.sent,n(u),o(i),e.next=20;break;case 19:alert("Something went wrong: User must have Freighter extension and must be on TESTNET");case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=Object(u.a)(p.a.mark((function e(){var r,u,i,f,l;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N();case 2:if(!e.sent){e.next=26;break}return e.next=6,F(t,c,a,s[0]);case 6:return r=e.sent,console.log(r),e.next=10,D(r.xdr,r.signer,r.signature);case 10:return u=e.sent,e.next=13,X(u);case 13:if(i=e.sent,console.log(i),!0!==i.successful){e.next=24;break}return e.next=18,R(t);case 18:return f=e.sent,e.next=21,P(c,a);case 21:l=e.sent,n(f),o(l);case 24:e.next=27;break;case 26:alert("Something went wrong: User must have Freighter extension and must be on TESTNET");case 27:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(f.jsxs)("div",{className:"cpanel",children:[Object(f.jsx)("button",{onClick:i,children:"Top Up"}),Object(f.jsx)("button",{onClick:l,children:"Run"})]})},z=function(e){var t=e.account,n=e.funcBalance;e.xdrToken;return Object(f.jsx)("div",{className:"assets-container",children:Object(f.jsxs)("ul",{className:"assets-list",children:[Object(f.jsxs)("li",{className:"assets-item",children:["Account: ",t]}),Object(f.jsxs)("li",{className:"assets-item",children:["Balance: ",n]})]})})};var J=function(){var e=Object(r.useState)([]),t=Object(o.a)(e,2),n=t[0],a=t[1],s=Object(r.useState)(""),c=Object(o.a)(s,2),i=c[0],l=c[1],x=Object(r.useState)(""),d=Object(o.a)(x,2),h=d[0],v=d[1],j=Object(r.useState)(""),O=Object(o.a)(j,2),w=O[0],k=O[1],m="https://stellar-turrets-testnet.sdf-ecosystem.workers.dev/",T=["9d64bd82134a1c141501dc16dca992446ecdc1812c1d75e8aab53443f879bf87"];return Object(r.useEffect)((function(){var e=function(){var e=Object(u.a)(p.a.mark((function e(){var t,n,r,a,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N();case 2:return t=e.sent,e.next=5,g();case 5:return n=e.sent,e.next=8,R(n);case 8:return r=e.sent,e.next=11,A(T,n);case 11:return a=e.sent,e.next=14,P(a,m);case 14:return s=e.sent,e.abrupt("return",{req:t,pk:n,assets:r,xdrToken:a,funcBalance:s});case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e().then((function(e){e.req&&(e.pk?(l(e.pk),a(e.assets),k(e.xdrToken),v(e.funcBalance)):l("Please Login"))})).catch(console.error)}),[]),Object(f.jsxs)("div",{className:"App",children:[Object(f.jsx)("header",{children:"Token Royale"}),Object(f.jsx)(z,{account:i,funcBalance:h}),Object(f.jsx)(C,{account:i,setAssets:a,turretPublicKey:"GB4OYM7TQTJSROWXHOJLKAX2IJ2QN4I6S6GCJH4MGWVTAO5Q5DPNADXX",funcBaseUrl:m,funcAddresses:T,xdrToken:w,setFuncBalance:v}),Object(f.jsx)(b,{account:i,setAccount:l,assets:n})]})},I=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,455)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),s(e),c(e)}))};c.a.render(Object(f.jsx)(a.a.StrictMode,{children:Object(f.jsx)(J,{})}),document.getElementById("root")),I()}},[[454,1,2]]]);
//# sourceMappingURL=main.01402f53.chunk.js.map